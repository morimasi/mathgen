
@tailwind base;
@tailwind components;
@tailwind utilities;

/* General Body Styles & Theming */
body {
    font-family: 'Nunito Sans', sans-serif;
    transition: background-color 0.3s ease, color 0.3s ease;
}

/* Font themes from FontThemeContext */
.font-theme-klasik { font-family: 'Lora', serif; }
.font-theme-modern { font-family: 'Nunito Sans', sans-serif; }
.font-theme-disleksi1 { font-family: 'Lexend', sans-serif; }
.font-theme-disleksi2 { font-family: 'Atkinson Hyperlegible', sans-serif; }
.font-theme-eglenceli { font-family: 'Caveat', cursive; }
.font-theme-yumusak { font-family: 'Comfortaa', cursive; }
.font-theme-blok { font-family: 'Roboto Slab', serif; }
.font-theme-net { font-family: 'Montserrat', sans-serif; }

/* Color themes from ColorThemeContext */
:root { --theme-color-accent: 234 88 12; }
.theme-orange { --theme-color-accent: 234 88 12; }
.theme-mint { --theme-color-accent: 5 150 105; }
.theme-rose { --theme-color-accent: 225 29 72; }
.theme-sky { --theme-color-accent: 2 132 199; }

/* Custom Component Styles */

/* Live Indicator for VisualSupportModule */
.live-indicator {
    @apply text-xs font-bold uppercase tracking-wider bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300 px-2 py-0.5 rounded-full;
}

/* Animated Logo */
@keyframes sway {
    0%, 100% { transform: rotate(-3deg); }
    50% { transform: rotate(3deg); }
}
.daisy-sway {
    transform-origin: 75px 140px;
    animation: sway 5s ease-in-out infinite;
}

@keyframes crawl {
    0% { transform: translate(0, 0) rotate(5deg); }
    25% { transform: translate(5px, -2px) rotate(0deg); }
    50% { transform: translate(0, 0) rotate(-5deg); }
    75% { transform: translate(-5px, 2px) rotate(0deg); }
    100% { transform: translate(0, 0) rotate(5deg); }
}
.crawling-bug {
    animation: crawl 4s ease-in-out infinite;
    transform-origin: center;
}

/* Flying Ladybug */
.flying-ladybug-container {
    position: absolute;
    width: 40px;
    height: 40px;
    will-change: transform, opacity, top, left;
}
.flying-ladybug-container .wings {
    animation: flutter 0.1s linear infinite;
    transform-origin: center;
}
@keyframes flutter {
    0%, 100% { transform: scaleY(1); }
    50% { transform: scaleY(0.1) rotate(5deg); }
}
.flying-ladybug-container .left-wing { transform-origin: 30px 30px; }
.flying-ladybug-container .right-wing { transform-origin: 30px 30px; }

/* Toast Notifications */
.toast-container {
    @apply fixed top-4 right-4 z-50 flex flex-col items-end gap-3;
}
.toast-item {
    @apply flex items-center gap-3 p-4 rounded-lg shadow-lg border w-80;
    transition: all 0.3s ease-in-out;
}
@keyframes toast-in {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}
@keyframes toast-out {
    from {
        transform: translateX(0);
        opacity: 1;
    }
    to {
        transform: translateX(100%);
        opacity: 0;
    }
}
.toast-item-enter { animation: toast-in 0.3s ease-in-out forwards; }
.toast-item-exit { animation: toast-out 0.3s ease-in-out forwards; }


/* Table Selector */
.table-selector-grid {
    @apply grid gap-1 p-2 bg-stone-100 dark:bg-stone-700 rounded;
    grid-template-columns: repeat(10, 1fr);
}
.table-selector-cell {
    @apply w-5 h-5 bg-stone-300 dark:bg-stone-600 rounded-sm transition-colors cursor-pointer;
}
.table-selector-cell.selected {
    @apply bg-orange-600;
}

/* Worksheet & Printing Styles */
#worksheet-area {
    font-size: var(--font-size);
    line-height: var(--line-height);
    text-align: var(--text-align);
    color: var(--color);
    transform-origin: top center;
    transition: transform 0.2s ease-out;
    transform: scale(var(--scale));
}
.worksheet-page {
    @apply bg-white shadow-lg mx-auto my-4 overflow-hidden;
    width: 21cm;
    min-height: 29.7cm;
    box-sizing: border-box;
}
.worksheet-page.landscape {
    width: 29.7cm;
    min-height: 21cm;
}

.worksheet-header {
    @apply flex justify-between items-center mb-8 pb-4 border-b-2 border-black;
}
.header-field {
    @apply border-b border-dotted border-stone-400 flex-1 min-w-0;
}
.header-field:not(:last-child) {
    @apply mr-8;
}
.worksheet-title {
    @apply text-2xl font-bold mb-4;
    font-size: calc(1.5rem * (var(--font-size, 16px) / 16px));
}
.worksheet-preamble {
    @apply mb-6 italic text-stone-600;
}
.worksheet-body.layout-flow {
    @apply grid gap-x-[var(--column-gap)] gap-y-[var(--problem-spacing)];
    grid-template-columns: repeat(var(--columns, 1), 1fr);
}
.worksheet-body.layout-table {
    @apply grid gap-2 border border-stone-300 p-2;
    grid-template-columns: repeat(var(--columns, 2), 1fr);
    grid-template-rows: repeat(var(--rows, 10), auto);
}
.layout-table .problem-item {
    @apply border border-stone-200 p-2 flex items-center justify-center;
    min-height: 50px;
}
.problem-item {
    @apply flex items-center gap-2 break-inside-avoid;
}
.problem-item.flow {
    display: block;
}
.problem-item.table {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
    align-items: center;
}
.problem-number {
    @apply font-bold text-stone-500;
}
.problem-content {
    flex-grow: 1;
}

/* Specific problem layouts */
.problem-item.vertical-html, .problem-item.long-division-html {
    @apply items-start;
}
.problem-item.layout-with-visual-space {
    @apply flex-col items-start;
}
.visual-space {
    @apply w-full h-32 border border-dashed border-stone-300 rounded-md mt-2;
}
.problem-item.layout-given-wanted {
    @apply flex-col items-start w-full;
}
.given-wanted-container {
    @apply w-full mt-2 space-y-2 text-sm;
}
.solution-box {
    @apply w-full h-12 border border-stone-300 rounded-md mt-1 p-1;
}
.solution-box.tall {
    height: 6rem;
}

/* Notebook styles */
.worksheet-page {
    position: relative;
}
.worksheet-page::after {
    content: '';
    position: absolute;
    top: calc(var(--page-margin, 2) * 1rem);
    left: calc(var(--page-margin, 2) * 1rem);
    right: calc(var(--page-margin, 2) * 1rem);
    bottom: calc(var(--page-margin, 2) * 1rem);
    pointer-events: none;
    z-index: 0;
}
.worksheet-page[data-notebook-style="lines"]::after {
    background-image: repeating-linear-gradient(to bottom, transparent, transparent calc(var(--line-height) * 1em - 1px), #dbeafe calc(var(--line-height) * 1em - 1px), #dbeafe calc(var(--line-height) * 1em));
    background-size: 100% calc(var(--line-height) * 1em);
}
.worksheet-page[data-notebook-style="grid"]::after {
    background-image: 
        linear-gradient(to right, #dbeafe 1px, transparent 1px),
        linear-gradient(to bottom, #dbeafe 1px, transparent 1px);
    background-size: 1em 1em;
}
.worksheet-page[data-notebook-style="dotted"]::after {
     background-image: radial-gradient(#dbeafe 1px, transparent 1px);
     background-size: 1em 1em;
}

/* Border styles */
.border-style-card .problem-item {
    @apply border border-stone-200 p-2 rounded-md;
}
.border-style-solid .problem-item {
    @apply border-b border-stone-300 pb-2;
}
.border-style-dashed .problem-item {
    @apply border-b border-dashed border-stone-300 pb-2;
}
.border-style-shadow-lift .problem-item {
     @apply bg-white dark:bg-stone-800 shadow-sm p-2 rounded;
}
.border-style-top-bar-color .problem-item {
    @apply border-t-4 border-orange-600 pt-2;
}

/* Print specific styles */
@media print {
    body {
        background-color: white !important;
    }
    .print-hidden {
        display: none !important;
    }
    .print-only {
        display: block !important;
    }
    .worksheet-page {
        box-shadow: none !important;
        margin: 0 !important;
        page-break-after: always;
    }
    #worksheet-area {
        transform: scale(1) !important;
    }
    .answer-key {
        margin-top: 0 !important;
        page-break-before: always;
    }
}

.print-only {
    display: none;
}
